var TrustLoopsWidget=function(t){"use strict";var e=Object.defineProperty,i=(t,i,r)=>((t,i,r)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r)(t,"symbol"!=typeof i?i+"":i,r);class r{constructor(t){if(i(this,"iframe"),i(this,"container"),i(this,"config"),this.config={height:600,width:"100%",theme:"light",...t},"string"==typeof t.container){const e=document.querySelector(t.container);if(!e)throw new Error(`Container element "${t.container}" not found`);this.container=e}else if(t.container instanceof HTMLElement)this.container=t.container;else{const t=document.currentScript;this.container=(null==t?void 0:t.parentElement)||document.body}this.iframe=this.createIframe(),this.setupMessageListener(),this.render()}createIframe(){const t=document.createElement("iframe");return t.src=this.getIframeUrl(),t.style.border="none",t.style.width="number"==typeof this.config.width?`${this.config.width}px`:this.config.width,t.style.height=`${this.config.height}px`,t.style.display="block",t.setAttribute("allowfullscreen","true"),t.setAttribute("title","TrustLoops Testimonials"),t}getIframeUrl(){const t=this.getBaseUrl(),e=new URLSearchParams({theme:this.config.theme,embed:"true"});return`${t}/wall/${this.config.projectId}?${e.toString()}`}getBaseUrl(){const t=document.currentScript;if(null==t?void 0:t.src){const e=new URL(t.src);return`${e.protocol}//${e.host}`}return"localhost"===window.location.hostname?"http://localhost:5173":"https://app.trustloops.com"}setupMessageListener(){window.addEventListener("message",t=>{var e;if(t.source===this.iframe.contentWindow&&"trustloops:resize"===(null==(e=t.data)?void 0:e.type)){const e=t.data.height;"number"==typeof e&&e>0&&(this.iframe.style.height=`${e}px`)}})}render(){this.container.appendChild(this.iframe)}destroy(){this.iframe&&this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe)}updateHeight(t){this.iframe.style.height=`${t}px`}}return window.TrustLoops=window.TrustLoops||{},window.TrustLoops.widget=t=>new r(t),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("script[data-trustloops-project-id]").forEach(t=>{const e=t.getAttribute("data-trustloops-project-id"),i=t.getAttribute("data-container"),o=t.getAttribute("data-height"),n=t.getAttribute("data-width"),s=t.getAttribute("data-theme");if(e){const a={projectId:e,container:i||t.parentElement,height:o?parseInt(o):void 0,width:n||void 0,theme:s||void 0};new r(a)}})}),t.TrustLoopsWidget=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t}({});
